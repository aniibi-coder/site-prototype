<!doctype html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ST9720GK2Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ST9720GK2Y');
</script>

<meta charset="utf-8" />

<!-- ===== FAVICONS ===== -->
<link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/favicon-16x16.png">
<link rel="icon" href="./assets/icons/favicon.ico" sizes="any">
<link rel="apple-touch-icon" href="./assets/icons/apple-touch-icon.png">
<meta name="theme-color" content="#080d16">
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>Ridekit ‚Äî Gear Finder</title>
<meta name="description" content="Gear finder prototype for ski & snowboard: search items, filter by mountain, temperature and budget, and get a short packing list.">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
/* ===== WINTER ALPINE DESIGN SYSTEM (same as index) ===== */
:root{
  --bg:#080d16;
  --bg-secondary:#0c1221;
  --card:#101828;
  --card-hover:#151f35;

  --text:#eaf4ff;
  --text-muted:#8ba4c7;
  --text-dim:#5a7299;

  --ice:#38bdf8;
  --ice-glow:#7dd3fc;
  --frost:#a5f3fc;
  --aurora-blue:#2563eb;
  --aurora-purple:#8b5cf6;
  --aurora-pink:#ec4899;
  --snow:#f0f9ff;
  --green-glow:#4ade80;

  --line:#1e3a5f;
  --line-light:#2a4a70;
  --glass-border:rgba(56,189,248,.15);

  --shadow-glow:0 0 40px rgba(56,189,248,.15);
  --shadow-frost:0 8px 32px rgba(8,13,22,.8);
  --gradient-aurora:linear-gradient(135deg, rgba(139,92,246,.15) 0%, rgba(236,72,153,.10) 50%, rgba(56,189,248,.15) 100%);
  --gradient-card:linear-gradient(135deg, rgba(16,24,40,.9) 0%, rgba(12,18,33,.95) 100%);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:Inter, system-ui, -apple-system, sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.5;
  -webkit-font-smoothing:antialiased;
}
.font-pixel{font-family:'Press Start 2P', monospace;letter-spacing:1px;}
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}

/* ===== HEADER (same as index) ===== */
header{
  height:64px;
  padding:0 24px;
  border-bottom:1px solid var(--line);
  position:fixed; top:0; left:0; right:0; width:100%;
  background:rgba(8,13,22,.85);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  z-index:10000;
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  gap:16px;
}
.headerLeft{display:flex;align-items:center;gap:16px;min-width:0;}
.badge{
  font-size:10px;color:var(--text-muted);
  border:1px solid var(--line);
  padding:6px 12px;border-radius:999px;
  background:rgba(16,24,40,.5);
  backdrop-filter:blur(6px);
  white-space:nowrap;
}
.headerNav{display:flex;align-items:center;justify-content:center;gap:8px;}
.headerNav a{
  color:var(--text-muted);
  text-decoration:none;
  font-weight:600;
  font-size:13px;
  border:1px solid var(--line);
  padding:8px 16px;
  border-radius:999px;
  background:rgba(16,24,40,.6);
  backdrop-filter:blur(8px);
  transition:all .25s ease;
  display:flex;align-items:center;gap:8px;
}
.headerNav a:hover{color:var(--text);background:rgba(30,58,95,.4);border-color:var(--line-light);transform:translateY(-2px);}
.headerNav a.active{background:rgba(56,189,248,.15);border-color:rgba(56,189,248,.4);color:var(--ice);box-shadow:0 0 20px rgba(56,189,248,.2);}
.headerRight{justify-self:end;}
.langSwitch{display:flex;align-items:center;gap:6px;padding:6px 8px;border:1px solid var(--line);border-radius:999px;background:rgba(16,24,40,.55);backdrop-filter:blur(10px);}
.langIcon{font-size:13px;color:var(--text-muted);margin-right:2px;opacity:.9;}
.langBtn{
  border:1px solid transparent;background:transparent;color:var(--text-muted);
  padding:6px 10px;border-radius:999px;
  font-size:11px;font-weight:800;letter-spacing:.6px;
  cursor:pointer;transition:all .2s ease;font-family:inherit;
}
.langBtn:hover{color:var(--text);background:rgba(30,58,95,.35);border-color:var(--line-light);transform:translateY(-1px);}
.langBtn.active{background:rgba(56,189,248,.15);border-color:rgba(56,189,248,.4);color:var(--ice);box-shadow:0 0 15px rgba(56,189,248,.18);}
@media (max-width: 768px){
  header{height:auto;grid-template-columns:1fr;padding:12px 16px;gap:12px;}
  .headerLeft{justify-content:center;flex-wrap:wrap;}
  .headerRight{justify-self:center;}
}

/* ===== PAGE LAYOUT ===== */
.wrap{
  padding-top:80px;
  max-width:1600px;
  margin:0 auto;
  padding:80px 16px 16px;
  display:grid;
  grid-template-columns: 420px 1fr;
  gap:16px;
  align-items:start;
}
@media (max-width: 1050px){
  .wrap{grid-template-columns:1fr;}
}

.card{
  background:var(--gradient-card);
  border:1px solid var(--line);
  border-radius:20px;
  padding:20px;
  position:relative;
  overflow:hidden;
  animation:fadeInUp .6s ease-out;
}
.card::before{
  content:'';
  position:absolute; inset:0;
  background:var(--gradient-aurora);
  opacity:0;
  transition:opacity .35s ease;
  pointer-events:none;
}
.card:hover::before{opacity:1;}
.card:hover{border-color:var(--glass-border);box-shadow:var(--shadow-glow);transform:translateY(-2px);}

.title{
  font-family:'Press Start 2P', monospace;
  font-size:14px;
  margin:0 0 10px 0;
  color:var(--snow);
  text-transform:uppercase;
  letter-spacing:1px;
}
.muted{color:var(--text-muted);font-size:13px;}
.divider{height:1px;background:linear-gradient(90deg, transparent 0%, var(--line) 50%, transparent 100%);margin:16px 0;}

.searchBar{
  display:flex; gap:10px; align-items:center;
  border:1px solid var(--line);
  background:rgba(16,24,40,.55);
  border-radius:16px;
  padding:10px 12px;
}
.searchBar input{
  flex:1;
  border:0; outline:0;
  background:transparent;
  color:var(--text);
  font-size:14px;
}
.searchBar input::placeholder{color:var(--text-dim);}
.searchBar .kbd{
  font-size:11px;
  color:var(--text-muted);
  border:1px solid rgba(30,58,95,.7);
  padding:4px 8px;
  border-radius:10px;
  background:rgba(12,18,33,.35);
}

.chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;}
.chip{
  border:1px solid var(--line);
  border-radius:999px;
  padding:7px 12px;
  font-size:12px;
  color:var(--text-muted);
  background:rgba(16,24,40,.55);
  cursor:pointer;
  display:inline-flex;align-items:center;gap:8px;
  transition:all .22s ease;
  user-select:none;
}
.chip:hover{border-color:var(--line-light);background:rgba(30,58,95,.35);transform:translateY(-1px);}
.chip.active{
  color:var(--ice);
  border-color:rgba(56,189,248,.45);
  background:rgba(56,189,248,.12);
  box-shadow:0 0 18px rgba(56,189,248,.18);
}
.chip .x{
  width:18px;height:18px;border-radius:999px;
  border:1px solid rgba(30,58,95,.8);
  display:inline-flex;align-items:center;justify-content:center;
  font-weight:900;font-size:12px;
  color:rgba(234,244,255,.8);
  background:rgba(12,18,33,.35);
}
.chip .x:hover{border-color:rgba(56,189,248,.55);}

.bubbles{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
.bubble{ /* recommended categories */
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 12px;
  font-size:12px;
  color:var(--text-muted);
  background:rgba(16,24,40,.35);
  cursor:pointer;
  transition:all .22s ease;
}
.bubble:hover{border-color:var(--line-light);background:rgba(30,58,95,.25);transform:translateY(-1px);}
.bubble.on{
  color:rgba(134,239,172,.98);
  border-color:rgba(74,222,128,.45);
  background:rgba(74,222,128,.08);
  box-shadow:0 0 16px rgba(74,222,128,.12);
}

.field{margin-top:14px;}
.labelRow{display:flex;justify-content:space-between;align-items:baseline;gap:10px;}
.labelRow label{font-weight:800;font-size:12px;color:rgba(234,244,255,.9);letter-spacing:.2px;}
.mini{font-size:12px;color:var(--text-muted);}
.rangeRow{margin-top:10px;}
input[type="range"]{width:100%;height:6px;border-radius:4px;background:var(--line);-webkit-appearance:none;appearance:none;cursor:pointer;}
input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--ice);box-shadow:0 0 15px rgba(56,189,248,.5);}
.moneyMarks{display:flex;justify-content:space-between;margin-top:8px;color:var(--text-muted);font-size:12px;}
.moneyMarks span{opacity:.55}
.moneyMarks span.on{opacity:1;color:var(--text);}

.tempBox{
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px;
  background:rgba(16,24,40,.35);
  margin-top:10px;
}
.tempTopRow{display:flex;justify-content:space-between;gap:10px;align-items:center;}
.tempPill{border:1px solid var(--line);border-radius:999px;padding:6px 12px;background:rgba(16,24,40,.55);font-size:12px;color:var(--text-muted);}
.tempPill b{color:var(--text);}
.tempHint{margin-top:8px;font-size:12px;color:var(--text-muted);}

.brandGrid{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;}
.brandBtn{
  border:1px solid var(--line);
  border-radius:999px;
  padding:7px 12px;
  font-size:12px;
  color:var(--text-muted);
  background:rgba(16,24,40,.55);
  cursor:pointer;
  transition:all .2s ease;
}
.brandBtn:hover{border-color:var(--line-light);background:rgba(30,58,95,.35);transform:translateY(-1px);}
.brandBtn.on{color:var(--ice);border-color:rgba(56,189,248,.45);background:rgba(56,189,248,.12);box-shadow:0 0 18px rgba(56,189,248,.18);}

/* ===== RESULTS ===== */
.resultsTop{
  display:flex; justify-content:space-between; align-items:center; gap:12px;
  flex-wrap:wrap;
}
.countPill{
  border:1px solid rgba(56,189,248,.35);
  background:rgba(56,189,248,.12);
  color:var(--ice);
  border-radius:999px;
  padding:7px 12px;
  font-size:12px;
  font-weight:800;
}
.resultList{margin-top:12px;display:flex;flex-direction:column;gap:12px;}
.item{
  display:grid;
  grid-template-columns: 78px 1fr 150px;
  gap:14px;
  align-items:center;
  padding:14px;
  border:1px solid var(--line);
  border-radius:16px;
  background:rgba(16,24,40,.35);
  transition:all .25s ease;
}
.item:hover{border-color:var(--line-light);background:rgba(30,58,95,.25);transform:translateX(4px);}
@media (max-width: 680px){
  .item{grid-template-columns:1fr; text-align:center;}
}
.thumb{
  width:78px;height:62px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(56,189,248,.06);
  display:flex;align-items:center;justify-content:center;
  font-size:26px;
}
.item h4{margin:0 0 6px 0;font-size:14px;color:var(--text);font-weight:800;}
.tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px;}
.tag{font-size:11px;color:var(--text-muted);border:1px solid rgba(30,58,95,.7);padding:4px 8px;border-radius:999px;background:rgba(12,18,33,.35);}
.item a.btn{
  display:inline-flex;align-items:center;justify-content:center;
  gap:8px;
  padding:12px 16px;
  border-radius:14px;
  background:rgba(56,189,248,.15);
  border:1px solid rgba(56,189,248,.35);
  color:var(--ice);
  text-decoration:none;
  font-weight:900;
  font-size:12px;
  transition:all .2s ease;
}
.item a.btn:hover{background:rgba(56,189,248,.25);border-color:rgba(56,189,248,.7);transform:translateY(-2px);box-shadow:0 0 20px rgba(56,189,248,.22);}
.item .note{font-size:12px;color:var(--text-muted);}

/* ===== FOOTER (same as index) ===== */
footer.siteFooter{
  margin-top:18px;
  padding:28px 16px;
  border-top:1px solid var(--line);
  background:rgba(0,0,0,.15);
}
.footerInner{
  max-width:1600px;
  margin:0 auto;
  display:grid;
  grid-template-columns:1.2fr 1fr 1fr;
  gap:18px;
  align-items:start;
}
.footerBrand{display:flex;align-items:center;gap:10px;font-weight:900;}
.footerDesc{margin-top:10px;color:rgba(159,176,208,.9);font-size:13px;line-height:1.5;max-width:520px;}
.footerCol h4{
  margin:0 0 10px 0;
  font-size:12px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:rgba(234,240,255,.92);
  font-family:'Press Start 2P', monospace;
}
.footerLinks{display:flex;flex-direction:column;gap:8px;}
.footerLinks a{color:rgba(159,176,208,.95);text-decoration:none;font-size:13px;width:max-content;border-bottom:1px solid transparent;padding-bottom:2px;}
.footerLinks a:hover{color:#eaf0ff;border-bottom-color:rgba(42,109,255,.55);}
.footerBottom{
  max-width:1600px;
  margin:18px auto 0 auto;
  padding-top:14px;
  border-top:1px solid rgba(36,48,74,.7);
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:space-between;
  color:rgba(159,176,208,.9);
  font-size:12px;
}
@media (max-width: 900px){ .footerInner{grid-template-columns:1fr;} }

.toast{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%) translateY(10px);
  background: rgba(16, 24, 40, 0.92);
  border: 1px solid var(--line);
  color: var(--text);
  padding: 10px 14px;
  border-radius: 14px;
  font-size: 12px;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease, transform .25s ease;
  z-index: 10000;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: var(--shadow-frost);
}
.toast.show{opacity:1;transform: translateX(-50%) translateY(0);}

/* ===== CALCULATOR (restored) ===== */
details.rkCalc{ padding:0; }
details.rkCalc > summary{ list-style:none; cursor:pointer; user-select:none; outline:none; }
details.rkCalc > summary::-webkit-details-marker{ display:none; }

.rkAccSummary{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:18px 20px;
  border-bottom:1px solid rgba(30,58,95,0.45);
  background: rgba(16,24,40,.22);
  border-radius:20px;
}
details.rkCalc[open] .rkAccSummary{
  border-bottom-left-radius:0;
  border-bottom-right-radius:0;
}
.rkAccChevron{
  font-size:16px;
  color: var(--text-muted);
  transform: rotate(-90deg);
  transition: transform .25s ease, color .25s ease;
  opacity:.95;
}
details.rkCalc[open] .rkAccChevron{
  transform: rotate(0deg);
  color: var(--ice);
}
.rkAccBody{ padding:18px 20px 20px 20px; }

.rkFormGrid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap:12px;
  margin-top:12px;
}
.rkField{
  grid-column: span 6;
  display:flex;
  flex-direction:column;
  gap:6px;
  min-width:0;
}
@media (max-width: 720px){ .rkField{ grid-column: span 12; } }

.rkLabelRow{display:flex;justify-content:space-between;align-items:baseline;gap:10px;}
.rkLabelRow label{font-size:13px;color:var(--text-muted);font-weight:600;}
.rkMini{font-size:12px;color:var(--text-dim);}

.rkFormGrid input[type="number"], .rkFormGrid select{
  width:100%;
  border:1px solid var(--line);
  background: rgba(16,24,40,.55);
  color: var(--text);
  padding:12px 14px;
  border-radius:14px;
  outline:none;
  font-family: inherit;
  transition: all .25s ease;
}
.rkFormGrid input[type="number"]:focus, .rkFormGrid select:focus{
  border-color: rgba(56,189,248,.55);
  box-shadow: 0 0 0 4px rgba(56,189,248,.10);
  background: rgba(16,24,40,.75);
}
.rkFormGrid select{ cursor:pointer; }

.rkBtnRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
  align-items:center;
}
.rkBtn{
  border:1px solid rgba(56,189,248,.35);
  background: rgba(56,189,248,.14);
  color: var(--ice);
  padding:12px 16px;
  border-radius:14px;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  transition: all .25s ease;
  display:inline-flex;
  align-items:center;
  gap:10px;
  user-select:none;
}
.rkBtn:hover{
  background: rgba(56,189,248,.22);
  border-color: rgba(56,189,248,.65);
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(56,189,248,.25);
}
.rkBtn.rkSecondary{
  border:1px solid var(--line);
  background: rgba(16,24,40,.55);
  color: var(--text-muted);
}
.rkBtn.rkSecondary:hover{
  background: rgba(30,58,95,.35);
  border-color: var(--line-light);
  color: var(--text);
  box-shadow:none;
}
.rkPill{
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 14px;
  font-size:12px;
  color: var(--text-muted);
  background: rgba(16,24,40,.6);
  backdrop-filter: blur(8px);
  white-space:nowrap;
}

.rkResultGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
  margin-top:12px;
}
@media (max-width: 900px){ .rkResultGrid{ grid-template-columns:1fr; } }

.rkResultCard{
  border:1px solid var(--line);
  border-radius:18px;
  padding:16px;
  background: rgba(16,24,40,.45);
  transition: all .3s ease;
}
.rkResultCard:hover{
  border-color: var(--line-light);
  background: rgba(30,58,95,.28);
  transform: translateY(-2px);
}
.rkResultTop{display:flex;justify-content:space-between;gap:10px;align-items:flex-start;}
.rkResultTop b{font-size:14px;}
.rkBig{font-size:28px;font-weight:900;letter-spacing:.5px;margin-top:10px;}
.rkSub{margin-top:6px;color: var(--text-muted);font-size:12px;line-height:1.4;}
.rkPillIce{
  background: rgba(56,189,248,.12);
  border-color: rgba(56,189,248,.35);
  color: var(--ice);
}

</style>
</head>

<body>
<header>
  <div class="headerLeft">
    <a class="logo" href="index.html" style="text-decoration:none;">
      <span class="logo-icon">üèîÔ∏è</span>
      <span class="font-pixel" style="font-weight:900;">RIDEKIT.FR</span>
    </a>
    <div class="badge">Gear Finder ‚Ä¢ search menu</div>
  </div>

  <nav class="headerNav" aria-label="Pages">
    <a href="index.html" data-page="home">Map</a>
    <a href="gear.html" data-page="gear">Gear finder</a>
  </nav>

  <div class="headerRight">
    <div class="langSwitch" role="group" aria-label="Language selector">
      <span class="langIcon" aria-hidden="true">üåê</span>
      <button class="langBtn active" type="button" data-lang="en" aria-label="English">EN</button>
      <button class="langBtn" type="button" data-lang="fr" aria-label="Fran√ßais">FR</button>
      <button class="langBtn" type="button" data-lang="ru" aria-label="–†—É—Å—Å–∫–∏–π">RU</button>
      <button class="langBtn" type="button" data-lang="de" aria-label="Deutsch">DE</button>
    </div>
  </div>
</header>

<div class="wrap">

  <!-- CALCULATOR (collapsible) -->
  <details class="card rkCalc accordion" id="calcCard" style="grid-column: 1 / -1;">
    <summary class="rkAccSummary" aria-controls="calcBody">
      <h2 class="title font-pixel" style="margin:0;">SKIS AND SNOWBOARDS SELECTION HELPER</h2>
      <span class="rkAccChevron" aria-hidden="true">‚ñæ</span>
    </summary>

    <div class="rkAccBody" id="calcBody">
      <div class="muted">This calculator helps people new to skiing and snowboarding to find matching equipment sizes.</div>

      <div class="rkFormGrid" aria-label="Sizing inputs">
        <div class="rkField">
          <div class="rkLabelRow">
            <label for="heightCm">Height (cm)</label>
            <span class="rkMini">e.g. 178</span>
          </div>
          <input id="heightCm" type="number" min="120" max="220" step="1" value="178" inputmode="numeric">
        </div>

        <div class="rkField">
          <div class="rkLabelRow">
            <label for="weightKg">Weight (kg)</label>
            <span class="rkMini">e.g. 75</span>
          </div>
          <input id="weightKg" type="number" min="35" max="150" step="1" value="75" inputmode="numeric">
        </div>

        <div class="rkField">
          <div class="rkLabelRow">
            <label for="ability">Ability</label>
            <span class="rkMini">controls length/flex</span>
          </div>
          <select id="ability">
            <option value="beginner">Beginner</option>
            <option value="intermediate" selected>Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>

        <div class="rkField">
          <div class="rkLabelRow">
            <label for="terrain">Terrain / style</label>
            <span class="rkMini">where you ride most</span>
          </div>
          <select id="terrain">
            <option value="allmountain" selected>All-mountain</option>
            <option value="piste">Mostly piste (groomers)</option>
            <option value="freeride">Freeride / powder</option>
            <option value="park">Park / freestyle</option>
          </select>
        </div>

        <div class="rkField">
          <div class="rkLabelRow">
            <label for="aggr">Riding feel</label>
            <span class="rkMini">relaxed vs aggressive</span>
          </div>
          <select id="aggr">
            <option value="relaxed">Relaxed</option>
            <option value="neutral" selected>Neutral</option>
            <option value="aggressive">Aggressive</option>
          </select>
        </div>

        <div class="rkField">
          <div class="rkLabelRow">
            <label for="boot">Boot size (EU) ‚Äî optional</label>
            <span class="rkMini">snowboard width hint</span>
          </div>
          <input id="boot" type="number" min="34" max="50" step="0.5" placeholder="e.g. 43">
        </div>
      </div>

      <div class="rkBtnRow">
        <button class="rkBtn" id="btnCalc" type="button">‚ú® Calculate</button>
        <button class="rkBtn rkSecondary" id="btnReset" type="button">‚Ü© Reset</button>
        <span class="rkPill" id="calcNote">Tip: tweak terrain to see different recommendations.</span>
      </div>

      <div class="divider"></div>

      <div class="rkResultGrid" id="resultGrid" aria-label="Sizing results">
        <!-- filled by JS -->
      </div>

      <div class="muted" style="margin-top:12px;font-size:13px;">
        Notes: Ski sizing mostly follows ‚Äúheight-based with adjustments‚Äù. Snowboard sizing is mainly weight-based, then adjusted for style. Always check the brand‚Äôs size chart.
      </div>
    </div>
  </details>

  <!-- LEFT: SEARCH / FILTERS -->
  <section class="card" aria-label="Search and filters">
    <h2 class="title font-pixel">SEARCH</h2>
    <div class="muted">Search anything (e.g. ‚Äúshell jacket‚Äù, ‚Äúgloves‚Äù, ‚Äúhelmet‚Äù). Use the chips like in your sketch.</div>

    <div class="searchBar" style="margin-top:12px;">
      <span aria-hidden="true">üîé</span>
      <input id="q" type="text" placeholder="Type here‚Ä¶" autocomplete="off">
      <span class="kbd" title="Keyboard shortcut">/</span>
    </div>

    <div class="chips" id="chipsRow" aria-label="Selected filters"></div>

    <div class="bubbles" aria-label="Recommended categories">
      <button class="bubble" type="button" data-bubble="pro">Pro</button>
      <button class="bubble" type="button" data-bubble="first">First experience</button>
      <button class="bubble" type="button" data-bubble="trip">Best for long trip</button>
      <button class="bubble" type="button" data-bubble="budget">Budget</button>
    </div>

    <div class="divider"></div>

    <h3 class="title font-pixel" style="font-size:13px;">MONEY</h3>
    <div class="field">
      <div class="labelRow">
        <label for="budget">Budget level</label>
        <span class="mini" id="budgetText">‚Ç¨‚Ç¨</span>
      </div>
      <div class="rangeRow">
        <input id="budget" type="range" min="1" max="3" step="1" value="2">
        <div class="moneyMarks">
          <span id="b1">‚Ç¨</span><span id="b2">‚Ç¨‚Ç¨</span><span id="b3">‚Ç¨‚Ç¨‚Ç¨</span>
        </div>
      </div>
    </div>

    <h3 class="title font-pixel" style="font-size:13px;margin-top:16px;">TEMPERATURE</h3>
    <div class="tempBox">
      <div class="tempTopRow">
        <div class="tempPill">Selected: <b id="selTemp">‚Äî</b></div>
        <div class="tempPill">Range: <b id="rngTemp">‚Äî</b></div>
      </div>
      <div class="rangeRow" style="margin-top:12px;">
        <input id="temp" type="range" min="-25" max="8" step="1" value="-8">
      </div>
      <div class="tempHint" id="tempHint">Tip: pick a mountain + day on the map page ‚Äî the temperature here will auto-fill.</div>
    </div>

    <h3 class="title font-pixel" style="font-size:13px;margin-top:16px;">FILTER</h3>
    <div class="muted">Brands (tap to toggle):</div>
    <div class="brandGrid" id="brands"></div>

    <div class="divider"></div>
    <div class="muted" style="font-size:12px;">
      ‚ö†Ô∏è Disclaimer: links are placeholders. Before monetization, add proper affiliate disclosure and use official affiliate links.
    </div>
  </section>

  <!-- RIGHT: RESULTS -->
  <section class="card" aria-label="Results">
    <div class="resultsTop">
      <div>
        <h2 class="title font-pixel">RESULTS</h2>
        <div class="muted" id="contextLine">No mountain selected yet.</div>
      </div>
      <div class="countPill" id="countPill">0 items</div>
    </div>

    <div class="resultList" id="list"></div>
  </section>
</div>

<footer class="siteFooter" role="contentinfo">
  <div class="footerInner">
    <div>
      <div class="footerBrand">
        <span style="filter: drop-shadow(0 0 10px rgba(42,109,255,0.35));">üèîÔ∏è</span>
        <span>RIDEKIT.FR</span>
      </div>
      <div class="footerDesc">
        A simple helper for choosing ski / snowboard gear based on weather and conditions.
        Always double‚Äëcheck real forecasts and avalanche bulletins before going to the mountains.
      </div>
    </div>

    <div class="footerCol">
      <h4>Navigation</h4>
      <div class="footerLinks">
        <a href="index.html">Resort map</a>
        <a href="gear.html">Gear finder</a>
      </div>
    </div>

    <div class="footerCol">
      <h4>Data & Sources</h4>
      <div class="footerLinks">
        <a href="https://open-meteo.com/" target="_blank" rel="noopener">Forecast: Open‚ÄëMeteo API</a>
        <a href="https://www.openstreetmap.org/" target="_blank" rel="noopener">Map: OpenStreetMap</a>
        <a href="privacy.html">Privacy policy</a>
      </div>
    </div>
  </div>

  <div class="footerBottom">
    <div>Made with ‚ù§Ô∏è for snowy adventures</div>
    <div>¬© 2026 RIDEKIT. All rights reserved.</div>
  </div>
</footer>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
/* ===== header active link ===== */
(function(){
  const path = (location.pathname || "").toLowerCase();
  const isGear = path.endsWith("/gear.html") || path.endsWith("gear.html");
  const homeLink = document.querySelector('.headerNav a[data-page="home"]');
  const gearLink = document.querySelector('.headerNav a[data-page="gear"]');
  if (!homeLink || !gearLink) return;
  (isGear ? gearLink : homeLink).classList.add("active");
})();

/* ===== language switch (placeholder, same behavior as index) ===== */
(function(){
  const STORAGE_KEY = "mml_lang";
  const btns = Array.from(document.querySelectorAll(".langBtn[data-lang]"));
  if (!btns.length) return;
  function normalize(lang){
    lang=(lang||"").toString().toLowerCase();
    if (lang.startsWith("en")) return "en";
    if (lang.startsWith("fr")) return "fr";
    if (lang.startsWith("ru")) return "ru";
    if (lang.startsWith("de")) return "de";
    return "en";
  }
  function showToast(msg){
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    clearTimeout(t._hideTimer);
    t._hideTimer = setTimeout(()=>t.classList.remove("show"), 2200);
  }
  function setLang(code, persist){
    const c = normalize(code);
    document.documentElement.setAttribute("lang", c);
    document.documentElement.dataset.lang = c;
    btns.forEach(b => b.classList.toggle("active", b.dataset.lang === c));
    if (persist) localStorage.setItem(STORAGE_KEY, c);
    showToast(`Language: ${c.toUpperCase()} (translations coming soon)`);
  }
  const saved = localStorage.getItem(STORAGE_KEY);
  const auto = normalize(navigator.language || navigator.userLanguage || "");
  setLang(saved || auto, false);
  btns.forEach(b => b.addEventListener("click", ()=> setLang(b.dataset.lang, true)));
})();

/* ===== Search menu logic (filters + list) ===== */
const RK_SEL_KEY = "rk_selection_v1";

const GEAR_DB = [
  // ===== Clothing (temperature-sensitive) =====
  { id:"base_top_merino", emoji:"üëï", title:"Base layer top (merino)", brand:"Icebreaker", budget:2, tempMin:-30, tempMax:6, tags:["base","trip","first"], note:"Next-to-skin wicking. Merino = warm + less smell.", link:"#"},
  { id:"base_bottom", emoji:"ü©≥", title:"Base layer bottoms", brand:"Decathlon", budget:1, tempMin:-25, tempMax:2, tags:["base","budget","first"], note:"Add on colder days or if you run cold.", link:"#"},
  { id:"mid_fleece", emoji:"üß∂", title:"Mid-layer fleece", brand:"Patagonia", budget:2, tempMin:-20, tempMax:4, tags:["mid","trip","first"], note:"Cheap warmth + breathability. Great default mid-layer.", link:"#"},
  { id:"mid_insulation", emoji:"üß•", title:"Insulation jacket (synthetic / down)", brand:"Rab", budget:2, tempMin:-30, tempMax:-6, tags:["insulation","trip","pro"], note:"For real cold or long breaks. Packable puffy.", link:"#"},
  { id:"shell_jacket_3l", emoji:"üßä", title:"Shell jacket (3L)", brand:"Arc'teryx", budget:3, tempMin:-25, tempMax:3, tags:["shell","pro","trip"], note:"Storm-proof for long days. Durable 3-layer shell.", link:"#"},
  { id:"shell_jacket_budget", emoji:"üßä", title:"Shell jacket (budget)", brand:"Decathlon", budget:1, tempMin:-15, tempMax:5, tags:["shell","budget","first"], note:"Good value shell. Works for resort days.", link:"#"},
  { id:"pants_shell", emoji:"üëñ", title:"Shell pants", brand:"Burton", budget:2, tempMin:-25, tempMax:3, tags:["shell","trip"], note:"Windproof for chairlift + descents.", link:"#"},
  { id:"pants_softshell", emoji:"üëñ", title:"Softshell pants", brand:"Decathlon", budget:1, tempMin:-12, tempMax:8, tags:["touring","budget","first"], note:"Breathable for hiking/touring, mild conditions.", link:"#"},
  { id:"socks_merino", emoji:"üß¶", title:"Merino ski socks", brand:"Smartwool", budget:2, tempMin:-30, tempMax:6, tags:["base","trip"], note:"One pair only (no double socks). Avoid wrinkles.", link:"#"},
  { id:"gloves_warm", emoji:"üß§", title:"Warm gloves / mittens", brand:"Hestra", budget:3, tempMin:-30, tempMax:-8, tags:["trip","pro"], note:"Cold days. Consider mittens if your hands freeze.", link:"#"},
  { id:"gloves_light", emoji:"üß§", title:"Light gloves", brand:"Black Diamond", budget:2, tempMin:-12, tempMax:6, tags:["first","touring"], note:"For active days / spring conditions.", link:"#"},
  { id:"neck_gaiter", emoji:"üß£", title:"Neck gaiter / buff", brand:"Buff", budget:1, tempMin:-30, tempMax:6, tags:["base","trip","first"], note:"Huge comfort upgrade on windy days.", link:"#"},
  { id:"balaclava", emoji:"ü•∑", title:"Balaclava (thin)", brand:"Decathlon", budget:1, tempMin:-30, tempMax:-5, tags:["trip","budget"], note:"Face protection for storms & very cold days.", link:"#"},
  { id:"hand_warmers", emoji:"üî•", title:"Hand warmers (disposable)", brand:"Generic", budget:1, tempMin:-30, tempMax:-5, tags:["trip","budget"], note:"Emergency warmth in very cold temps.", link:"#"},
  { id:"sunscreen", emoji:"üß¥", title:"Sunscreen SPF50+ (mountain)", brand:"La Roche-Posay", budget:2, tempIndependent:true, tags:["always","trip","first"], note:"High UV in mountains even in winter. Worth it.", link:"#"},
  { id:"lip_balm", emoji:"üíÑ", title:"Lip balm SPF", brand:"Nivea", budget:1, tempIndependent:true, tags:["always","budget","first"], note:"Wind + sun protection.", link:"#"},  

  // ===== Hardgoods (NOT temperature-sensitive ‚Äî buy/bring regardless) =====
  { id:"helmet", emoji:"‚õëÔ∏è", title:"Helmet", brand:"Giro", budget:2, tempIndependent:true, tags:["always","first","trip"], note:"Safety first. Fit is everything.", link:"#"},
  { id:"goggles", emoji:"ü•Ω", title:"Goggles (all-weather lens)", brand:"Smith", budget:2, tempIndependent:true, tags:["always","trip"], note:"Visibility matters. Consider an extra low-light lens.", link:"#"},
  { id:"goggles_lowlight", emoji:"üå´Ô∏è", title:"Goggles lens (low-light / storm)", brand:"Oakley", budget:2, tempIndependent:true, tags:["always","trip","pro"], note:"For flat light + storms (very common in Alps).", link:"#"},
  { id:"ski_all_mountain", emoji:"üéø", title:"Skis ‚Äî All-mountain", brand:"Rossignol", budget:2, tempIndependent:true, tags:["always","first","trip"], note:"Default choice for resort skiing: piste + some soft snow.", link:"#"},
  { id:"ski_freeride", emoji:"üèîÔ∏è", title:"Skis ‚Äî Freeride / powder", brand:"Faction", budget:3, tempIndependent:true, tags:["always","pro","trip"], note:"Wider skis for off-piste and powder days.", link:"#"},
  { id:"ski_touring", emoji:"‚õ∞Ô∏è", title:"Skis ‚Äî Touring (light)", brand:"Dynafit", budget:3, tempIndependent:true, tags:["always","pro","touring"], note:"Light setup for skinning uphill (needs touring bindings + skins).", link:"#"},
  { id:"ski_poles", emoji:"ü¶Ø", title:"Ski poles", brand:"Leki", budget:2, tempIndependent:true, tags:["always","first"], note:"Adjustable poles are handy for touring / shared use.", link:"#"},
  { id:"ski_boots", emoji:"ü•æ", title:"Ski boots (most important for comfort)", brand:"Salomon", budget:2, tempIndependent:true, tags:["always","first","trip"], note:"Boot fit beats everything. Try in-store if possible.", link:"#"},
  { id:"ski_bindings", emoji:"üß∑", title:"Ski bindings", brand:"Marker", budget:2, tempIndependent:true, tags:["always","trip"], note:"Match bindings to skier level + DIN range + boot sole.", link:"#"},
  { id:"skins", emoji:"üß©", title:"Skins (for touring)", brand:"Pomoca", budget:2, tempIndependent:true, tags:["touring","pro"], note:"Needed for touring skis. Cut-to-fit for your model.", link:"#"},
  { id:"backpack_day", emoji:"üéí", title:"Backpack 18‚Äì25L (day pack)", brand:"Osprey", budget:2, tempIndependent:true, tags:["always","trip","first"], note:"Carry water, layers, snacks, small safety kit.", link:"#"},
  { id:"backpack_touring", emoji:"üéí", title:"Touring backpack 25‚Äì35L", brand:"Ortovox", budget:3, tempIndependent:true, tags:["touring","pro","trip"], note:"More space + tool pocket for shovel/probe.", link:"#"},
  { id:"avalanche_beacon", emoji:"üì°", title:"Avalanche beacon (DVA)", brand:"Mammut", budget:3, tempIndependent:true, tags:["safety","pro","touring"], note:"Mandatory off-piste/touring with partners + training.", link:"#"},
  { id:"avalanche_shovel", emoji:"‚õèÔ∏è", title:"Avalanche shovel", brand:"Ortovox", budget:2, tempIndependent:true, tags:["safety","pro","touring"], note:"Metal shovel recommended. Plastic is weak.", link:"#"},
  { id:"avalanche_probe", emoji:"üìè", title:"Avalanche probe", brand:"Black Diamond", budget:2, tempIndependent:true, tags:["safety","pro","touring"], note:"240‚Äì300 cm typical. Practice matters.", link:"#"},
  { id:"water_bottle", emoji:"üö∞", title:"Water bottle / thermos", brand:"Hydro Flask", budget:2, tempIndependent:true, tags:["always","trip"], note:"Hydration helps. In cold, a thermos is great.", link:"#"},
];


const state = {
  q: "",
  budget: 2,
  tempC: -8,
  bubbles: new Set(), // "pro" | "first" | "trip" | "budget"
  brands: new Set(),
  selection: null
};

const els = {
  q: document.getElementById("q"),
  chipsRow: document.getElementById("chipsRow"),
  budget: document.getElementById("budget"),
  budgetText: document.getElementById("budgetText"),
  b1: document.getElementById("b1"),
  b2: document.getElementById("b2"),
  b3: document.getElementById("b3"),
  temp: document.getElementById("temp"),
  selTemp: document.getElementById("selTemp"),
  rngTemp: document.getElementById("rngTemp"),
  tempHint: document.getElementById("tempHint"),
  brands: document.getElementById("brands"),
  contextLine: document.getElementById("contextLine"),
  list: document.getElementById("list"),
  countPill: document.getElementById("countPill"),
};

function moneyText(n){ return n===1 ? "‚Ç¨" : (n===2 ? "‚Ç¨‚Ç¨" : "‚Ç¨‚Ç¨‚Ç¨"); }

function readSelection(){
  try{
    const raw = localStorage.getItem(RK_SEL_KEY);
    if (!raw) return null;
    return JSON.parse(raw);
  }catch(e){ return null; }
}

function clearSelection(){
  try{ localStorage.removeItem(RK_SEL_KEY); }catch(e){}
  state.selection = null;
  paintChips();
  paintContext();
  render();
}

function paintContext(){
  const s = state.selection;
  if (!s || !s.name){
    els.contextLine.textContent = "No mountain selected yet. Go to Map ‚Üí pick a mountain.";
    return;
  }
  const day = s.date ? ` ‚Ä¢ ${s.date}` : "";
  const tmin = (typeof s.tmin === "number") ? Math.round(s.tmin) : null;
  const tmax = (typeof s.tmax === "number") ? Math.round(s.tmax) : null;
  const tr = (tmin!=null && tmax!=null) ? ` ‚Ä¢ ${tmax}¬∞ / ${tmin}¬∞` : "";
  els.contextLine.textContent = `${s.name} (${s.region})${day}${tr}`;
}

function chip(label, active, onClick, allowX=false, onX=null){
  const b = document.createElement("button");
  b.type="button";
  b.className = "chip" + (active ? " active" : "");
  b.textContent = label;
  b.addEventListener("click", onClick);

  if (allowX){
    const x = document.createElement("span");
    x.className = "x";
    x.textContent = "√ó";
    x.title = "Clear";
    x.addEventListener("click", (e)=>{ e.stopPropagation(); onX && onX(); });
    b.appendChild(x);
  }
  return b;
}

function paintChips(){
  els.chipsRow.innerHTML = "";
  const sel = state.selection;

  // Selected mountain chip (glows if selected)
  if (sel && sel.name){
    els.chipsRow.appendChild(
      chip(`Selected mountain: ${sel.name}`, true, ()=>{ location.href="index.html"; }, true, clearSelection)
    );
  }else{
    els.chipsRow.appendChild(
      chip("Selected mountain", false, ()=>{ location.href="index.html"; })
    );
  }

  // Selected section (placeholder)
  els.chipsRow.appendChild(
    chip("Selected section", state.bubbles.has("trip"), ()=> toggleBubble("trip"))
  );
}

function paintBudget(){
  els.budgetText.textContent = moneyText(state.budget);
  els.b1.classList.toggle("on", state.budget===1);
  els.b2.classList.toggle("on", state.budget===2);
  els.b3.classList.toggle("on", state.budget===3);
}

function paintTemp(){
  els.selTemp.textContent = `${state.tempC}¬∞C`;
  const s = state.selection;
  const tmin = (s && typeof s.tmin === "number") ? Math.round(s.tmin) : null;
  const tmax = (s && typeof s.tmax === "number") ? Math.round(s.tmax) : null;

  if (tmin!=null && tmax!=null){
    els.rngTemp.textContent = `${tmax}¬∞ / ${tmin}¬∞`;
    els.tempHint.textContent = "Auto-filled from the selected mountain/day on the map page.";
  }else{
    els.rngTemp.textContent = "‚Äî";
    els.tempHint.textContent = "Tip: pick a mountain + day on the map page ‚Äî the temperature here will auto-fill.";
  }
}

function toggleBubble(k){
  if (state.bubbles.has(k)) state.bubbles.delete(k);
  else state.bubbles.add(k);
  document.querySelectorAll(".bubble").forEach(b=>{
    b.classList.toggle("on", state.bubbles.has(b.dataset.bubble));
  });
  // convenience: if user clicks "budget" bubble, set budget to ‚Ç¨
  if (k==="budget" && state.bubbles.has("budget")) state.budget = 1;
  paintBudget();
  render();
}

function buildBrandButtons(){
  const brands = Array.from(new Set(GEAR_DB.map(x=>x.brand))).sort();
  els.brands.innerHTML = "";
  brands.forEach(br=>{
    const b = document.createElement("button");
    b.type="button";
    b.className = "brandBtn" + (state.brands.has(br) ? " on" : "");
    b.textContent = br;
    b.addEventListener("click", ()=>{
      if (state.brands.has(br)) state.brands.delete(br);
      else state.brands.add(br);
      b.classList.toggle("on", state.brands.has(br));
      render();
    });
    els.brands.appendChild(b);
  });
}

function matchItem(it){
  const q = (state.q || "").trim().toLowerCase();
  if (q){
    const hay = `${it.title} ${it.brand} ${it.tags.join(" ")}`.toLowerCase();
    if (!hay.includes(q)) return false;
  }

  if (state.brands.size && !state.brands.has(it.brand)) return false;

  // budget: item must be <= selected budget
  if (it.budget > state.budget) return false;

  // temp: for clothing we check range; for hardgoods (helmet/goggles/skis/etc.) tempIndependent = true
  if (!it.tempIndependent){
    if (typeof it.tempMin === "number" && state.tempC < it.tempMin) return false;
    if (typeof it.tempMax === "number" && state.tempC > it.tempMax) return false;
  }

  // bubbles: require corresponding tags
  for (const b of state.bubbles){
    if (b === "budget") continue; // budget already handled
    if (!it.tags.includes(b)) return false;
  }
  return true;
}

function render(){
  paintContext();
  paintTemp();
  paintBudget();

  const out = GEAR_DB.filter(matchItem);
  els.countPill.textContent = `${out.length} items`;
  els.list.innerHTML = out.map(it => {
    const tags = it.tags.map(t=>`<span class="tag">${t}</span>`).join("");
    return `
      <div class="item">
        <div class="thumb" aria-hidden="true">${it.emoji}</div>
        <div>
          <h4>${it.title}</h4>
          <div class="note"><b>${it.brand}</b> ‚Ä¢ Budget: ${moneyText(it.budget)} ‚Ä¢ ${it.tempIndependent ? 'Temp: any' : ('Works around ' + it.tempMin + '..' + it.tempMax + '¬∞C')}</div>
          <div class="tags">${tags}</div>
          <div class="note" style="margin-top:6px;">${it.note}</div>
        </div>
        <div style="display:flex;justify-content:flex-end;">
          <a class="btn" href="${it.link}" target="_blank" rel="noopener">Open ‚Üí</a>
        </div>
      </div>
    `;
  }).join("") || `
    <div class="muted" style="margin-top:8px;">
      No matches. Try removing some filters or increasing the budget.
    </div>
  `;
}

function wire(){
  // keyboard shortcut for search
  document.addEventListener("keydown", (e)=>{
    if (e.key === "/" && document.activeElement !== els.q){
      e.preventDefault();
      els.q.focus();
    }
  });

  els.q.addEventListener("input", ()=>{ state.q = els.q.value; render(); });
  els.budget.addEventListener("input", ()=>{
    state.budget = parseInt(els.budget.value, 10);
    paintBudget();
    render();
  });
  els.temp.addEventListener("input", ()=>{
    state.tempC = parseInt(els.temp.value, 10);
    render();
  });

  document.querySelectorAll(".bubble").forEach(b=>{
    b.addEventListener("click", ()=> toggleBubble(b.dataset.bubble));
  });

  buildBrandButtons();
  paintChips();
  paintBudget();
  paintTemp();
  render();
}

(function init(){
  state.selection = readSelection();

  // If we have selection from index, auto-set temp from it (or keep slider)
  if (state.selection && typeof state.selection.tempC === "number"){
    state.tempC = Math.round(state.selection.tempC);
  }
  els.temp.value = state.tempC;

  wire();
})();

/* ===== Collapsible calculator (remember open/closed) ===== */
(function(){
  const det = document.getElementById("calcCard");
  if (!det) return;
  const key = "rk_calc_open";
  const sum = det.querySelector("summary");
  function sync(){
    if (sum) sum.setAttribute("aria-expanded", det.open ? "true" : "false");
  }
  try{
    const saved = localStorage.getItem(key);
    if (saved === "1") det.open = true;
    if (saved === "0") det.open = false;
  }catch(e){}
  sync();
  det.addEventListener("toggle", () => {
    sync();
    try{ localStorage.setItem(key, det.open ? "1" : "0"); }catch(e){}
  });
})();

/* ===== Calculator logic (simple heuristics) ===== */
function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }
function round5(x){ return Math.round(x / 5) * 5; }

function skiLengthRange(heightCm, ability, terrain, aggr){
  let base = heightCm * 0.90;
  const terrAdj = { park:-8, piste:-3, allmountain:0, freeride:+6 }[terrain] ?? 0;
  const abilAdj = { beginner:-8, intermediate:0, advanced:+6 }[ability] ?? 0;
  const aggrAdj = { relaxed:-3, neutral:0, aggressive:+4 }[aggr] ?? 0;

  let center = base + terrAdj + abilAdj + aggrAdj;
  center = clamp(center, heightCm - 25, heightCm + 10);

  const range = (ability === "beginner") ? 10 : (ability === "advanced") ? 12 : 10;
  const minLen = round5(center - range/2);
  const maxLen = round5(center + range/2);
  return { minLen, maxLen, center: round5(center) };
}

function skiType(terrain){
  if (terrain === "park") return "Freestyle / Twin-tip";
  if (terrain === "piste") return "Piste / Carving";
  if (terrain === "freeride") return "Freeride / Powder";
  return "All-mountain";
}

function snowboardLengthByWeight(weightKg){
  if (weightKg < 45) return { min: 135, max: 145 };
  if (weightKg < 55) return { min: 140, max: 150 };
  if (weightKg < 65) return { min: 146, max: 155 };
  if (weightKg < 75) return { min: 150, max: 159 };
  if (weightKg < 85) return { min: 154, max: 162 };
  if (weightKg < 95) return { min: 158, max: 166 };
  return { min: 160, max: 170 };
}

function snowboardAdjust(range, terrain, ability, aggr){
  let min = range.min, max = range.max;
  if (terrain === "park") { min -= 3; max -= 3; }
  if (terrain === "piste") { min -= 1; max -= 1; }
  if (terrain === "freeride") { min += 3; max += 3; }
  if (ability === "beginner") { min -= 2; max -= 2; }
  if (ability === "advanced") { min += 2; max += 2; }
  if (aggr === "aggressive") { min += 1; max += 1; }
  if (aggr === "relaxed") { min -= 1; max -= 1; }

  min = clamp(min, 130, 175);
  max = clamp(max, 132, 178);

  const center = round5((min + max) / 2);
  return { min: round5(min), max: round5(max), center };
}

function snowboardShape(terrain){
  if (terrain === "park") return "True twin / directional twin";
  if (terrain === "freeride") return "Directional (setback) / tapered";
  return "Directional twin / all-mountain";
}

function flexSuggestion(ability, terrain, aggr){
  let flex = 5;
  if (terrain === "park") flex -= 1;
  if (terrain === "freeride") flex += 1;
  if (ability === "beginner") flex -= 2;
  if (ability === "advanced") flex += 1;
  if (aggr === "aggressive") flex += 1;
  if (aggr === "relaxed") flex -= 1;
  flex = clamp(flex, 2, 8);
  const label = (flex <= 3) ? "Soft" : (flex <= 5) ? "Medium" : "Stiff-ish";
  return { flex, label };
}

function widthHint(bootEU){
  if (!bootEU || !isFinite(bootEU)) return "Width: standard (check boot chart)";
  if (bootEU >= 45) return "Width: Wide (for big boots)";
  if (bootEU >= 42.5) return "Width: Mid-wide / Wide depending on brand";
  return "Width: standard";
}

function renderResults(){
  const height = parseFloat(document.getElementById("heightCm")?.value);
  const weight = parseFloat(document.getElementById("weightKg")?.value);
  const ability = document.getElementById("ability")?.value;
  const terrain = document.getElementById("terrain")?.value;
  const aggr = document.getElementById("aggr")?.value;
  const boot = parseFloat(document.getElementById("boot")?.value);

  const grid = document.getElementById("resultGrid");
  if (!grid) return;

  if (!isFinite(height) || !isFinite(weight) || height < 120 || weight < 35){
    grid.innerHTML = `
      <div class="rkResultCard">
        <div class="muted">Please enter valid height + weight.</div>
      </div>
    `;
    return;
  }

  const ski = skiLengthRange(height, ability, terrain, aggr);
  const snowBase = snowboardLengthByWeight(weight);
  const board = snowboardAdjust(snowBase, terrain, ability, aggr);
  const flex = flexSuggestion(ability, terrain, aggr);

  const skiTxt = skiType(terrain);
  const boardShapeTxt = snowboardShape(terrain);
  const wHint = widthHint(boot);

  grid.innerHTML = `
    <div class="rkResultCard">
      <div class="rkResultTop">
        <div>
          <b>üéø Skis</b>
          <div class="rkSub">${skiTxt}</div>
        </div>
        <span class="rkPill rkPillIce">${ability}</span>
      </div>
      <div class="rkBig">${ski.minLen}‚Äì${ski.maxLen} cm</div>
      <div class="rkSub">
        Center: <b>${ski.center} cm</b><br/>
        Tip: quick turns ‚Üí closer to ${ski.minLen}; stability ‚Üí closer to ${ski.maxLen}.
      </div>
    </div>

    <div class="rkResultCard">
      <div class="rkResultTop">
        <div>
          <b>üèÇ Snowboard</b>
          <div class="rkSub">${boardShapeTxt}</div>
        </div>
        <span class="rkPill rkPillIce">${aggr}</span>
      </div>
      <div class="rkBig">${board.min}‚Äì${board.max} cm</div>
      <div class="rkSub">
        Center: <b>${board.center} cm</b><br/>
        Flex: <b>${flex.label}</b> (${flex.flex}/10)<br/>
        ${wHint}
      </div>
    </div>
  `;
}

document.getElementById("btnCalc")?.addEventListener("click", renderResults);
document.getElementById("btnReset")?.addEventListener("click", () => {
  document.getElementById("heightCm").value = 178;
  document.getElementById("weightKg").value = 75;
  document.getElementById("ability").value = "intermediate";
  document.getElementById("terrain").value = "allmountain";
  document.getElementById("aggr").value = "neutral";
  document.getElementById("boot").value = "";
  renderResults();
});

["heightCm","weightKg","ability","terrain","aggr","boot"].forEach(id => {
  const el = document.getElementById(id);
  el?.addEventListener("input", renderResults);
  el?.addEventListener("change", renderResults);
});

</script>
</body>
</html>















